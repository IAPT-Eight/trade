{{extend 'layout.html'}}

<div class="row">
    <div class="col-md-3">
        <h3><i class="fa fa-fw fa-search"></i> Filter</h3>
        <table class="table table-striped">
            {{display_name = 'Your' if is_users_page else user.username+"'s'"}}
            <tr>
                <td>{{=A("All", _href=URL(args=request.args, host=True))}}</td>
                <td>{{=sum(list_sizes.values())}}</td>
            </tr>
                <td>{{=A("{} Public".format(display_name), _href=URL(args=request.args, vars={'filter': LIST_PUBLIC_COLLECTION}, host=True))}}</td>
                <td>{{=list_sizes[LIST_PUBLIC_COLLECTION]}}</td>
            <tr>
                <td>{{=A("{} Has".format(display_name), _href=URL(args=request.args, vars={'filter': LIST_TRADING}, host=True))}}</td>
                <td>{{=list_sizes[LIST_TRADING]}}</td>
            </tr>
            <tr>
                <td>{{=A("{} Wants".format(display_name), _href=URL(args=request.args, vars={'filter': LIST_WISH_LIST}, host=True))}}</td>
                <td>{{=list_sizes[LIST_WISH_LIST]}}</td>
            </tr>
            {{if is_users_page:}}
            <tr>
                <td>{{=A("{} Private".format(display_name), _href=URL(args=request.args, vars={'filter': LIST_PRIVATE_COLLECTION}, host=True))}}</td>
                <td>{{=list_sizes[LIST_PRIVATE_COLLECTION]}}</td>
            </tr>
            {{pass}}
        </table>

    </div>
    <div class="col-md-9">

        {{if is_users_page:}}
            <a href="{{=URL(c='items', f='add_item')}}"
                class="btn btn-primary pull-right">
                <i class="fa fa-fw fa-plus-circle"></i>
                Add a new item
            </a>

        {{else:}}
            <a href="{{=URL(c='trade', f='new', args=[user.id])}}"
                class="btn btn-primary pull-right">
                <i class="fa fa-fw fa-question-circle"></i>
                Propose a trade
            </a>

        {{pass}}

        <h2>
            <i class="fa fa-fw fa-user"></i>
            {{=user.first_name}} {{=user.last_name}}
            <span class="text-muted">({{=user.username}})</span>

        </h2>

        <hr />


        {{if is_users_page and len(items) == 0:}}
            <div class="alert alert-block alert-info">
                <h4>
                    <i class="fa fa-fw fa-info-circle"></i>
                    New here?
                </h4>
                <p>
                    Start adding items you want to trade or share with the world to your collection, clicking on the "Add new Item" button.
                </p>

                <p>
                    Otherwise, click on "Explore" to browse other users' collections.
                </p>

            </div>

        {{else:}}
            <div id="users_items">

                {{include 'items/preview-list.html'}}

            </div>
        {{pass}}


    </div>
</div>
